<!DOCTYPE html>
<html>
  <head>
    <title>课程管理</title>
	
    <meta name="keywords" content="keyword1,keyword2,keyword3">
    <meta name="description" content="this is my page">
    <meta name="content-type" content="text/html; charset=UTF-8">
    
    <!--<link rel="stylesheet" type="text/css" href="./styles.css">-->
 <#include '../common/css.html' >
  </head>
  
  <body>
    
    <#include '../common/header-org.html'>
	
			<div class='container body'>
		
		
		<div class='row'>
		 <div class='col-xs-3 new-style'>
		
		<#include 'left-chapter.html'></div>
		<div class='col-xs-9 fch ' >
		<div class="text" >&nbsp;&nbsp;课程信息</div>
		
		
		 <form class='form form-horizontal validate-form' id="form1">
                        <div class='form-group'>
                          <label class='control-label col-sm-3 col-sm-3' for='validation_name'>图片：</label>
                          <div class='col-sm-8 controls'>
                          <img src="${(course.thumb)!'${request.contextPath}/assets/images/cu1.jpg'}" width="255" height="145" id="pathimg" class="img-style" style="float: left;"/>
                          <input type="hidden" id="path" value="${(course.thumb)!'${request.contextPath}/assets/images/cu1.jpg'}" />
                             <div id="result-uploader" class="right upload-style"
							style="float:left;margin-left:20px;margin-top:80px"></div>
							<div style="width:300px;height:40px; margin-left:270px;margin-top:110px;">
							<p>(支持BMP、JPEG、JPG、PNG、GIF格式)</p>
							<div class="imgsc hide bmyz-sc">
							<em class=""style="color: red;font-size: 12px;font-style: normal;">上传成功</em>
						</div>
						<div class="yz5 hide bmyz-sc">
							<em class="" style="color: red;font-size: 12px;font-style: normal;">图片不能为空</em>
						</div>
							</div>
						
                          </div>
                        </div>
                         <div class='form-group'>
                          <label class='control-label col-sm-3 col-sm-3' for='validation_name'>教学视频：</label>
                          <div class='col-sm-8 controls'>
                         	<div id="result-uploader1" class="right upload-style"
							style="float:left;margin-right:20px"></div>
						<p>
							(支持MP4、flv、avi、rmvb、<br/>3gp、mpeg、swf格式)
						</p>
						<input type="hidden" id="path1" value="" />


						<div class="spsc hide bmyz-sc">
							<em class="" style="color: red;font-size: 12px;font-style: normal;">上传成功</em>
						</div>
						<div class="yz1 hide bmyz-sc">
							<em class="" style="color: red;font-size: 12px;font-style: normal;">视频不能为空</em>
						</div>
							
						 </div>
                        </div>
                        <div class='form-group'>
                          <label class='control-label col-sm-3 col-sm-3' for='validation_name'>课程名称：</label>
                          <div class='col-sm-6 controls'>
                            <input class='form-control link-name' id="link-name" data-rule-required='true' value="${course.name}" placeholder='请输入课程名称' name='validation_name'  type='text'>
                          </div>
                        </div>
                         <div class='form-group'>
                          <label class='control-label col-sm-3' for='validation_email'>课程分类:</label>
                          <div class='col-sm-6 controls'>
                             <input class='form-control link-name'  data-rule-required='true' id='link-category' value="${(course.category)!''}" placeholder='请输入课程分类' name='validation_email'  type='text'>
                          </div>
                        </div>
                        <div class='form-group'>
                          <label class='control-label col-sm-3' for='validation_email'>奖项分类:</label>
                          <div class='col-sm-6 controls'>
                            <select class="form-input1" id="prize" style="width:250px;height: 33px;">
                            <option value="${(course.prize)!''}"  class="optval">${(course.prize)!''}</option>
								<option value="特等奖"  class="optval">特等奖</option>
								<option value="一等奖"  class="optval">一等奖</option>
							<!-- <option value="二等奖"  class="optval">二等奖</option>
								<option value="三等奖"  class="optval">三等奖</option> -->	
								</select>
                          </div>
                        </div>
                        <div class='form-group'>
                          <label class='control-label col-sm-3' for='validation_email'>等级分类:</label>
                          <div class='col-sm-6 controls'>
                            <select class="form-input1" id="level" style="width:250px;height: 33px;">
                             <option value="${(course.level)!''}"  class="optval">${(course.level)!''}</option>
								<option value="国家级"  class="optval">国家级</option>
								<option value="省级"  class="optval">省级</option>
								
								</select>
                          </div>
                        </div>
                       <div class='form-group'>
                          <label class='control-label col-sm-3' for='validation_email'>课程特色:</label>
                          <div class='col-sm-6 controls'>
                          <textarea rows="4" cols="120" id="link-feature" name='validation_email'  style="width:500px">${(course.feature)!''}</textarea>
                          
                          </div>
                        </div>
                        <div class='form-group'>
                          <label class='control-label col-sm-3' for='validation_email'>课程描述:</label>
                          <div class='col-sm-6 controls'>
                           <textarea rows="4" cols="120" id="describle2"  style="width:500px">${(course.describle)!''}</textarea>
                          </div>
                        </div>
                         <div class='form-group disp'>
                          <label class='control-label col-sm-3' for='validation_email'>id:</label>
                          <div class='col-sm-6 controls'>
                            <input class='form-control  push-input-text'  data-rule-required='true' id='link-id' name='validation_email' value="${course.id}"  type='text'>
                          </div>
                        </div>
                        <div class='form-actions'>
                          <div class='row'>
                            <div class='col-sm-9 col-sm-offset-3'>
                              <button class='btn btn-success btn-edit btn-save' onclick="editsave()" type='button'>           
                                                                              更&nbsp;&nbsp;新
                              </button>
                            
                            </div>
                            
                          </div>
                        </div>
                      </form>
		
		
		 </div>
		</div>
		</div>
		
    <#include '../common/footer.html'>
    
    <#include '../common/js.html'>
    <script>
    $(function(){
    	createUploaderimg();
    	createUploadersp();
    });
      function editsave(){
    	   var name=$("#link-name").val();
    	   //var parentid=$("#parentid1").val();
    	    var category=$("#link-category").val();
    	   var feature=$("#link-feature").val();
    	    var describle=$("#describle2").val();
    	    var id=$("#link-id").val();
    	    var thumb=$("#path").val();
    	    var prize=$("#prize").val();
			var level=$("#level").val();
			var video=$("#path1").val();
    	  //  alert(id);
    	   var data={"id":id,"name":name,"describle":describle,"category":category,"feature":feature,"thumb":thumb,"prize":prize,"level":level,"video":video};
    	   $.ajax({
    			url:"${request.contextPath}/courseadmin/editcourse",
    			type:"post",
    			data:data,
    			success:function(s){if (s.success)
    					{
    						alert(s.msg);
    						
    					}
    					else{alert(s.msg);}
    					location.reload();}
    		});
    	   }
      //图片上传
      function createUploaderimg() {
				var uploader = new qq.FineUploader(
						{
							element : document.getElementById('result-uploader'),
							request : {
								endpoint : '${request.contextPath}/courseadmin/upload'
							},
							validation : {
								allowedExtensions : ['bmp','jpeg','jpg','png','gif']
							},

							text : {
								uploadButton : '<i class="glyphicon glyphicon-plus"></i>上传'
							},
							template : '<div class="qq-uploader">'
									+ '<pre class="qq-upload-drop-area"><span>{dragZoneText}</span></pre>'
									+ '<div class="qq-upload-button btn btn-success" style="border:1px solid #e75545;color:#fff;background-color:#e75545" >{uploadButtonText}</div>'
									+ '<span class="qq-drop-processing" style="display:none"><span>{dropProcessingText}</span>'
									+ '<span class="qq-drop-processing-spinner"></span></span>'
									+ '<ul class="qq-upload-list" style="margin-top: 10px; text-align: center;display:none"></ul>'
									+ '</div>',
							classes : {
								success : 'alert alert-success',
								fail : 'alert alert-error'
							},
							callbacks : {
								onComplete : function(id, fileName, responseJSON) {
									if (responseJSON.success) {
										var filepath = responseJSON.imgpath;
									
										$("#path").val(filepath);
										$(".imgsc").removeClass("hide");
										$("#pathimg").attr(
												"src",
												'${request.contextPath}'
														+ filepath);
									}
								}
							}
						});
			}
    //视频上传
		 function createUploadersp() {
				var uploader = new qq.FineUploader(
						{
							element : document.getElementById('result-uploader1'),
							request : {
								endpoint : '${request.contextPath}/courseadmin/upload'
							},
							validation : {
								allowedExtensions : [ 'mp4', 'avi', 'rmvb','flv', '3gp', 'mpeg','swf' ]
							},

							text : {
								uploadButton : '<i class="glyphicon glyphicon-plus"></i>上传'
							},
							template : '<div class="qq-uploader">'
									+ '<pre class="qq-upload-drop-area"><span>{dragZoneText}</span></pre>'
									+ '<div class="qq-upload-button btn btn-success" style="border:1px solid #e75545;color:#fff;background-color:#e75545" >{uploadButtonText}</div>'
									+ '<span class="qq-drop-processing" style="display:none"><span>{dropProcessingText}</span>'
									+ '<span class="qq-drop-processing-spinner"></span></span>'
									+ '<ul class="qq-upload-list" style="margin-top: 10px; text-align: center;display:none"></ul>'
									+ '</div>',
							classes : {
								success : 'alert alert-success',
								fail : 'alert alert-error'
							},
							callbacks : {
								onComplete : function(id, fileName, responseJSON) {
									if (responseJSON.success) {
										var filepath = responseJSON.imgpath;
									
										$("#path1").val(filepath);
										$(".spsc").removeClass("hide");
									
									}
								}
							}
						});
			}
    </script>
    
  </body>
</html>
